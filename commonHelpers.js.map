{"version":3,"file":"commonHelpers.js","sources":["../src/js/reviews.js"],"sourcesContent":["import axios from 'axios';\nimport Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst mySwiper = document.querySelector('.mySwiper');\nconst nextButton = document.querySelector('.s-button-next');\nconst prevButton = document.querySelector('.s-button-prev');\n\nconst serverError = () => {\n  iziToast.error({\n    title: 'Error',\n    message: 'Sorry, there are problems on the server',\n    position: 'topRight',\n    timeout: 3000,\n  });\n};\n\nasync function getReviews() {\n  return (await axios.get(`https://portfolio-js.b.goit.study/api/reviews`))\n    .data;\n}\n\nasync function init() {\n  try {\n    const reviews = await getReviews();\n\n    function renderImages(reviews) {\n      const markup = reviews\n        .map(item => {\n          return `<li class=\"swiper-item swiper-slide\">\n            <p class=\"text-review\">${item.review}</p>\n            <div class=\"reviewer\">\n              <img src=\"${item.avatar_url}\" alt=\"${item.author}\" class=\"reviewer-foto\" />\n              <p class=\"reviewer-name\">${item.author}</p>\n            </div>\n          </li>`;\n        })\n        .join('');\n      mySwiper.innerHTML = '';\n      mySwiper.insertAdjacentHTML('beforeend', markup);\n    }\n\n    renderImages(reviews);\n\n    const swiper = new Swiper('.swiper', {\n      navigation: {\n        nextEl: '.s-button-next',\n        prevEl: '.s-button-prev',\n      },\n      keyboard: {\n        enabled: true,\n        onlyInViewport: true,\n        pageUpDown: true,\n        pageUpDown: true,\n      },\n      mousewheel: {\n        sensitivity: 3,\n      },\n\n      breakpoints: {\n        300: {\n          slidesPerView: 1,\n          spaceBetween: 0,\n        },\n        1280: {\n          slidesPerView: 2,\n          spaceBetween: 32,\n        },\n      },\n    });\n\n    function updateButtons() {\n      if (swiper.isEnd) {\n        nextButton.classList.add('disabled');\n        nextButton.setAttribute('disabled', 'true');\n      } else {\n        nextButton.classList.remove('disabled');\n        nextButton.removeAttribute('disabled');\n      }\n      if (swiper.isBeginning) {\n        prevButton.classList.add('disabled');\n        prevButton.setAttribute('disabled', 'true');\n      } else {\n        prevButton.classList.remove('disabled');\n        prevButton.removeAttribute('disabled');\n      }\n    }\n    updateButtons();\n\n    swiper.on('slideChange', updateButtons);\n  } catch (error) {\n    serverError();\n    const markupError = `<li class=\"swiper-item swiper-slide\">\n                     <p class=\"text-review error\">Not found</p>`;\n    mySwiper.insertAdjacentHTML('beforeend', markupError);\n    nextButton.classList.add('disabled');\n    prevButton.classList.add('disabled');\n    prevButton.setAttribute('disabled', 'true');\n    nextButton.setAttribute('disabled', 'true');\n    console.error('Error fetching reviews:', error);\n  }\n}\n\ninit();\n"],"names":["mySwiper","nextButton","prevButton","serverError","iziToast","getReviews","axios","init","renderImages","reviews","markup","item","updateButtons","swiper","Swiper","error","markupError"],"mappings":"owBAKA,MAAMA,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAa,SAAS,cAAc,gBAAgB,EACpDC,EAAa,SAAS,cAAc,gBAAgB,EAEpDC,EAAc,IAAM,CACxBC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,WACV,QAAS,GACb,CAAG,CACH,EAEA,eAAeC,GAAa,CAC1B,OAAQ,MAAMC,EAAM,IAAI,+CAA+C,GACpE,IACL,CAEA,eAAeC,GAAO,CACpB,GAAI,CAGF,IAASC,EAAT,SAAsBC,EAAS,CAC7B,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA,qCACoBA,EAAK,MAAM;AAAA;AAAA,0BAEtBA,EAAK,UAAU,UAAUA,EAAK,MAAM;AAAA,yCACrBA,EAAK,MAAM;AAAA;AAAA,gBAG3C,EACA,KAAK,EAAE,EACVX,EAAS,UAAY,GACrBA,EAAS,mBAAmB,YAAaU,CAAM,CAChD,EA+BQE,EAAT,UAAyB,CACnBC,EAAO,OACTZ,EAAW,UAAU,IAAI,UAAU,EACnCA,EAAW,aAAa,WAAY,MAAM,IAE1CA,EAAW,UAAU,OAAO,UAAU,EACtCA,EAAW,gBAAgB,UAAU,GAEnCY,EAAO,aACTX,EAAW,UAAU,IAAI,UAAU,EACnCA,EAAW,aAAa,WAAY,MAAM,IAE1CA,EAAW,UAAU,OAAO,UAAU,EACtCA,EAAW,gBAAgB,UAAU,EAExC,EA9DD,MAAMO,EAAU,MAAMJ,IAkBtBG,EAAaC,CAAO,EAEpB,MAAMI,EAAS,IAAIC,EAAO,UAAW,CACnC,WAAY,CACV,OAAQ,iBACR,OAAQ,gBACT,EACD,SAAU,CACR,QAAS,GACT,eAAgB,GAChB,WAAY,GACZ,WAAY,EACb,EACD,WAAY,CACV,YAAa,CACd,EAED,YAAa,CACX,IAAK,CACH,cAAe,EACf,aAAc,CACf,EACD,KAAM,CACJ,cAAe,EACf,aAAc,EACf,CACF,CACP,CAAK,EAkBDF,IAEAC,EAAO,GAAG,cAAeD,CAAa,CACvC,OAAQG,EAAO,CACdZ,IACA,MAAMa,EAAc;AAAA,iEAEpBhB,EAAS,mBAAmB,YAAagB,CAAW,EACpDf,EAAW,UAAU,IAAI,UAAU,EACnCC,EAAW,UAAU,IAAI,UAAU,EACnCA,EAAW,aAAa,WAAY,MAAM,EAC1CD,EAAW,aAAa,WAAY,MAAM,EAC1C,QAAQ,MAAM,0BAA2Bc,CAAK,CAC/C,CACH,CAEAR,EAAM"}